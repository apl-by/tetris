{"version":3,"sources":["components/Main/Main.js","components/BrickGame/Screen/Block/Block.js","components/generic/Title/Title.js","services/selectors/gameControlSelectors.js","services/selectors/mainSelectors.js","services/selectors/statSelectors.js","components/BrickGame/Screen/PlayArea/PlayArea.js","components/BrickGame/Screen/GameStat/GameStat.js","components/BrickGame/Screen/Screen.js","components/BrickGame/ControlPanel/Btn/Btn.js","components/BrickGame/ControlPanel/ControlPanel.js","components/generic/Link/Link.js","images/github_icon.svg","utils/config.js","components/BrickGame/BrickGame.js","components/Footer/Footer.js","services/slices/gameControlSlice.js","utils/piecesConfig.js","utils/levelsConfig.js","utils/utils.js","services/slices/mainSlice.js","services/slices/statSlice.js","hooks/useInterval.js","components/App/App.js","services/actionCreators/index.js","reportWebVitals.js","services/store.js","index.js"],"names":["Main","children","className","Block","state","match","cnBlock","cn","block_active","block_matched","memo","Title","text","mix","cnTitle","gameControlSelectors","gameControl","isPause","isGameOn","isGameOver","pressedBtn","mainSelectors","main","playArea","statArea","isRoundEnd","statSelectors","stat","score","record","lines","level","levelConfig","speed","PlayArea","useSelector","Object","entries","map","v","isActive","id","GameStat","Screen","Btn","type","ariaLabel","modSize","modColor","modShadow","onDown","onUp","isTablet","cnBtn","aria-label","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","ControlPanel","includes","Link","link","iconAlt","icon","cnLink","href","target","rel","src","alt","PIECES_TYPES","BASE_NUM","MOVE_BUTTONS","CONTROL_KEYS","pause","restart","left","right","down","turn","drop","GH_LINK","BrickGame","props","ghIcon","Footer","useState","year","setYear","useEffect","currentYear","Date","getFullYear","gameControlSlice","createSlice","name","initialState","reducers","togglePause","action","setPause","start","setBtn","payload","clearBtn","setGameOver","extraReducers","builder","addCase","actions","PIECES_CONFIG","I","base","cells","checkLeft","checkRight","checkBottom","reverse","O","L","J","S","Z","T","LEVEL_CONFIG","1","lev","point","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","producePieces","array","arr","i","length","j","Math","floor","random","_mixArray","Array","fill","flat","checkMovePermit","piece","position","direction","posType","sum","x","y","cellsToCheck","some","String","getCells","currentPiece","prevPos","nextPos","prevBaseCells","nextBaseCells","prevCells","filter","nextCells","initialPlayArea","createPlayArea","initialStatArea","statAria","arrNum","splice","createStatArea","handleMatchesAsync","createAsyncThunk","a","Promise","resolve","setTimeout","gameOverAsync","dispatch","count","run","fillCells","emptyCells","pieces","all","current","next","isNeedSave","mainSlice","setPieces","newPieces","currentCells","filteredCells","keys","forEach","pos","newPos","setPositionOnDrop","moveDown","moveLeft","moveRight","setPositionOnTurn","piecePos","currCellsToCheck","prevCellsUnless","checkRotation","num","from","el","ind","setSaved","pending","meta","arg","fulfilled","newPlayArea","statSlice","updateStat","newScore","newLines","upLevel","useInterval","callback","delay","savedCallback","useRef","useLayoutEffect","setInterval","clearInterval","App","key","setKey","wasFirstInvoke","setWasFirstInvoke","useDispatch","controlHandlers","setMoveInterval","useMediaQuery","query","document","addEventListener","handleKeyup","handleKeydown","removeEventListener","checkGameOver","then","res","rows","matchCount","activeCells","nonActiveCells","rowStartCell","searchMatch","matches","clone","_cloneDeep","matchedRows","values","rowsBefore","push","rowsWithoutMatches","stop","rowForReplace","updPlayAreaWithMatches","prev","LINES_CONFIG","getScore","sumLines","batch","startsWith","handleDrop","handleTurnPiece","handleMoveLeft","handleMoveRight","handleMoveDown","isTimer","startGame","restartKey","handlePause","e","preventDefault","keyCode","useMemo","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","preloadedState","localStorage","getItem","JSON","parse","store","configureStore","reducer","mainReduser","statReduser","gameControlReduser","devTools","saveToLocalStorage","setItem","stringify","getState","subscribe","throttle","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b0bba688.chunk.js","sourcesContent":["import \"./Main.scss\";\r\n\r\nfunction Main({ children }) {\r\n  return <main className=\"main\">{children}</main>;\r\n}\r\n\r\nexport default Main;\r\n","import \"./Block.scss\";\r\nimport cn from \"classnames\";\r\nimport { memo } from \"react\";\r\n\r\nfunction Block({ state, match }) {\r\n  const cnBlock = cn(\"block\", {\r\n    block_active: state && !match,\r\n    block_matched: match,\r\n  });\r\n  return <li className={cnBlock}></li>;\r\n}\r\n\r\nexport default memo(Block);\r\n","import \"./Title.scss\";\r\nimport cn from \"classnames\";\r\n\r\nfunction Title({ text, mix }) {\r\n  const cnTitle = cn(\"title\", { [`${mix}`]: mix });\r\n\r\n  return <p className={cnTitle}>{text}</p>;\r\n}\r\n\r\nexport default Title;\r\n","export const gameControlSelectors = {\r\n  isPause: (state) => state.gameControl.isPause,\r\n  isGameOn: (state) => state.gameControl.isGameOn,\r\n  isGameOver: (state) => state.gameControl.isGameOver,\r\n  pressedBtn: (state) => state.gameControl.pressedBtn,\r\n};\r\n","export const mainSelectors = {\r\n  playArea: (state) => state.main.playArea,\r\n  statArea: (state) => state.main.statArea,\r\n  all: (state) => state.main.pieces.all,\r\n  current: (state) => state.main.pieces.current,\r\n  next: (state) => state.main.pieces.next,\r\n  position: (state) => state.main.position,\r\n  isRoundEnd: (state) => state.main.isRoundEnd,\r\n};\r\n","export const statSelectors = {\r\n  score: (state) => state.stat.score,\r\n  record: (state) => state.stat.record,\r\n  lines: (state) => state.stat.lines,\r\n  level: (state) => state.stat.level,\r\n  speed: (state) => state.stat.levelConfig.speed,\r\n};\r\n","import \"./PlayArea.scss\";\r\nimport Block from \"../Block/Block\";\r\nimport Title from \"../../../generic/Title/Title\";\r\nimport {\r\n  gameControlSelectors,\r\n  mainSelectors,\r\n} from \"../../../../services/selectors\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nfunction PlayArea() {\r\n  const playArea = useSelector(mainSelectors.playArea);\r\n  const isPause = useSelector(gameControlSelectors.isPause);\r\n  const isGameOn = useSelector(gameControlSelectors.isGameOn);\r\n  const isGameOver = useSelector(gameControlSelectors.isGameOver);\r\n\r\n  return (\r\n    <div className=\"play-area\">\r\n      <ul className=\"play-area__list\">\r\n        {Object.entries(playArea).map(([k, v]) => (\r\n          <Block key={v.id} state={v.isActive} match={v.match} />\r\n        ))}\r\n      </ul>\r\n      {isPause && (\r\n        <div className=\"play-area__cover\">\r\n          {isGameOn && <Title text=\"Пауза\" mix=\"play-area__pause\" />}\r\n          {!isGameOn && !isGameOver && (\r\n            <Title text={`Жми\\nстарт`} mix=\"play-area__start\" />\r\n          )}\r\n          {isGameOver && <Title text={`Конец\\nигры`} mix=\"play-area__end\" />}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PlayArea;\r\n","import \"./GameStat.scss\";\r\nimport Block from \"../Block/Block\";\r\nimport { statSelectors, mainSelectors } from \"../../../../services/selectors\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nfunction GameStat() {\r\n  const score = useSelector(statSelectors.score);\r\n  const record = useSelector(statSelectors.record);\r\n  const lines = useSelector(statSelectors.lines);\r\n  const level = useSelector(statSelectors.level);\r\n  const statArea = useSelector(mainSelectors.statArea);\r\n\r\n  return (\r\n    <div className=\"game-stat\">\r\n      <h2 className=\"game-stat__title\">Очки:</h2>\r\n      <p className=\"game-stat__value\">{score}</p>\r\n      <h2 className=\"game-stat__title\">Линии:</h2>\r\n      <p className=\"game-stat__value\">{lines}</p>\r\n      <h2 className=\"game-stat__title\">Уровень:</h2>\r\n      <p className=\"game-stat__value\">{level}</p>\r\n      <h2 className=\"game-stat__title\">Следующая:</h2>\r\n      <ul className=\"game-stat__list\">\r\n        {Object.entries(statArea).map(([k, v]) => (\r\n          <Block key={v.id} state={v.isActive} match={v.match} />\r\n        ))}\r\n      </ul>\r\n      <h2 className=\"game-stat__title\">Рекорд:</h2>\r\n      <p className=\"game-stat__value\">{record}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GameStat;\r\n","import \"./Screen.scss\";\r\nimport PlayArea from \"./PlayArea/PlayArea\";\r\nimport GameStat from \"./GameStat/GameStat\";\r\n\r\nfunction Screen() {\r\n  return (\r\n    <div className=\"container\">\r\n      <h1 className=\"container__title\">Тетрис</h1>\r\n      <div className=\"screen\">\r\n        <PlayArea />\r\n        <GameStat />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Screen;\r\n","import \"./Btn.scss\";\nimport cn from \"classnames\";\n\nfunction Btn({\n  type,\n  ariaLabel,\n  modSize,\n  modColor,\n  modShadow,\n  mix,\n  onDown,\n  onUp,\n  isTablet,\n}) {\n  const cnBtn = cn(\n    \"btn\",\n    {\n      [`btn_size_${modSize}`]: modSize,\n      [`btn_color_${modColor}`]: modColor,\n      [`btn_shadow_${modShadow}`]: modShadow,\n    },\n    { [`${mix}`]: mix }\n  );\n\n  return (\n    <button\n      className={cnBtn}\n      type={type}\n      aria-label={ariaLabel}\n      onMouseDown={!isTablet ? onDown : null}\n      onMouseUp={!isTablet ? onUp : null}\n      onTouchStart={isTablet ? onDown : null}\n      onTouchEnd={isTablet ? onUp : null}\n    ></button>\n  );\n}\n\nexport default Btn;\n","import \"./ControlPanel.scss\";\r\nimport Btn from \"./Btn/Btn\";\r\nimport { gameControlSelectors } from \"../../../services/selectors\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nfunction ControlPanel({ onDown, onUp, isTablet }) {\r\n  const pressedBtn = useSelector(gameControlSelectors.pressedBtn);\r\n  const modShadow =\r\n    pressedBtn === \"\"\r\n      ? null\r\n      : [\"restart\", \"pause\"].includes(pressedBtn)\r\n      ? \"reverse-s\"\r\n      : \"reverse-m\";\r\n\r\n  return (\r\n    <div className=\"control-panel\">\r\n      <div className=\"control-panel__main\">\r\n        <Btn\r\n          type=\"button\"\r\n          ariaLabel=\"влево\"\r\n          modSize={isTablet ? \"mobile\" : \"m\"}\r\n          modColor=\"yellow\"\r\n          modShadow={pressedBtn === \"left\" ? modShadow : null}\r\n          mix=\"control-panel__left\"\r\n          onDown={() => onDown(\"left\")}\r\n          onUp={() => onUp()}\r\n          isTablet={isTablet}\r\n        />\r\n        <Btn\r\n          type=\"button\"\r\n          ariaLabel=\"вниз\"\r\n          modSize={isTablet ? \"mobile\" : \"m\"}\r\n          modColor=\"yellow\"\r\n          modShadow={pressedBtn === \"down\" ? modShadow : null}\r\n          mix=\"control-panel__down\"\r\n          onDown={() => onDown(\"down\")}\r\n          onUp={() => onUp()}\r\n          isTablet={isTablet}\r\n        />\r\n        <Btn\r\n          type=\"button\"\r\n          ariaLabel=\"повернуть\"\r\n          modSize={isTablet ? \"mobile\" : \"m\"}\r\n          modColor=\"yellow\"\r\n          modShadow={pressedBtn === \"turn\" ? modShadow : null}\r\n          mix=\"control-panel__up\"\r\n          onDown={() => onDown(\"turn\")}\r\n          onUp={() => onUp()}\r\n          isTablet={isTablet}\r\n        />\r\n        <Btn\r\n          type=\"button\"\r\n          ariaLabel=\"вправо\"\r\n          modSize={isTablet ? \"mobile\" : \"m\"}\r\n          modColor=\"yellow\"\r\n          modShadow={pressedBtn === \"right\" ? modShadow : null}\r\n          mix=\"control-panel__right\"\r\n          onDown={() => onDown(\"right\")}\r\n          onUp={() => onUp()}\r\n          isTablet={isTablet}\r\n        />\r\n      </div>\r\n      <div className=\"control-panel__top\">\r\n        <Btn\r\n          type=\"button\"\r\n          ariaLabel=\"кнопка сбросить\"\r\n          modSize=\"s\"\r\n          modColor=\"red\"\r\n          modShadow={pressedBtn === \"restart\" ? modShadow : null}\r\n          mix=\"control-panel__small-btn\"\r\n          onDown={() => onDown(\"restart\")}\r\n          onUp={() => onUp()}\r\n          isTablet={isTablet}\r\n        />\r\n        <Btn\r\n          type=\"button\"\r\n          ariaLabel=\"кнопка пауза/старт\"\r\n          modSize=\"s\"\r\n          modColor=\"green\"\r\n          modShadow={pressedBtn === \"pause\" ? modShadow : null}\r\n          mix=\"control-panel__small-btn\"\r\n          onDown={() => onDown(\"pause\")}\r\n          onUp={() => onUp()}\r\n          isTablet={isTablet}\r\n        />\r\n        <Btn\r\n          type=\"button\"\r\n          ariaLabel=\"кнопка уронить\"\r\n          modSize={isTablet ? \"mobile\" : \"l\"}\r\n          modColor=\"yellow\"\r\n          modShadow={pressedBtn === \"drop\" ? modShadow : null}\r\n          mix=\"control-panel__drop\"\r\n          onDown={() => onDown(\"drop\")}\r\n          onUp={() => onUp()}\r\n          isTablet={isTablet}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ControlPanel;\r\n","import \"./Link.scss\";\nimport cn from \"classnames\";\n\nfunction Link({ link, iconAlt, icon, mix }) {\n  const cnLink = cn(\"link\", { [`${mix}`]: mix });\n\n  return (\n    <a href={link} target=\"_blank\" rel=\"noreferrer\" className={cnLink}>\n      <img src={icon} alt={iconAlt} className=\"link__icon\" /> Github\n    </a>\n  );\n}\n\nexport default Link;\n","export default __webpack_public_path__ + \"static/media/github_icon.0f101c29.svg\";","export const PIECES_TYPES = [\"I\", \"O\", \"L\", \"J\", \"S\", \"Z\", \"T\"];\r\n\r\n// Стартовые номера ячеек игровой области, в которые устанавливается фигура\r\n// (для создания игрового поля в области stat)\r\nexport const BASE_NUM = [3, 4, 5, 6, 13, 14, 15, 16];\r\n\r\nexport const MOVE_BUTTONS = [\"left\", \"right\", \"down\", \"turn\", \"drop\"];\r\n\r\nexport const CONTROL_KEYS = {\r\n  pause: [\"p\", \"P\", \"з\", \"З\"],\r\n  restart: [\"r\", \"R\", \"к\", \"К\"],\r\n  left: [\"ArrowLeft\", \"a\", \"A\", \"ф\", \"Ф\"],\r\n  right: [\"ArrowRight\", \"d\", \"D\", \"в\", \"В\"],\r\n  down: [\"ArrowDown\", \"s\", \"S\", \"ы\", \"Ы\"],\r\n  turn: [\"ArrowUp\", \"w\", \"W\", \"ц\", \"Ц\"],\r\n  drop: [32],\r\n};\r\n\r\nexport const GH_LINK = \"https://github.com/apl-by/tetris\";\r\n","import \"./BrickGame.scss\";\r\nimport Screen from \"./Screen/Screen\";\r\nimport ControlPanel from \"./ControlPanel/ControlPanel\";\r\nimport Link from \"../generic/Link/Link\";\r\nimport ghIcon from \"../../images/github_icon.svg\";\r\nimport { GH_LINK } from \"../../utils/config\";\r\n\r\nfunction BrickGame({ isTablet, ...props }) {\r\n  return (\r\n    <section className=\"brick-game\">\r\n      {isTablet && (\r\n        <Link\r\n          link={GH_LINK}\r\n          icon={ghIcon}\r\n          iconAlt=\"иконка github\"\r\n          mix=\"brick-game__link\"\r\n        />\r\n      )}\r\n      <Screen />\r\n      <ControlPanel {...props} isTablet={isTablet} />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default BrickGame;\r\n","import \"./Footer.scss\";\r\nimport Link from \"../generic/Link/Link\";\r\nimport { useState, useEffect } from \"react\";\r\nimport ghIcon from \"../../images/github_icon.svg\";\r\nimport { GH_LINK } from \"../../utils/config\";\r\n\r\nfunction Footer() {\r\n  const [year, setYear] = useState(2021);\r\n\r\n  useEffect(() => {\r\n    const date = new Date();\r\n    const currentYear = date.getFullYear();\r\n    if (currentYear > 2021) {\r\n      setYear(`2021-${currentYear}`);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; {year} \"Проект - тетрис\"</p>\r\n      <Link link={GH_LINK} icon={ghIcon} iconAlt=\"иконка github\" />\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  isPause: true,\r\n  isGameOn: false,\r\n  isGameOver: false,\r\n  pressedBtn: \"\",\r\n};\r\n\r\nconst gameControlSlice = createSlice({\r\n  name: \"gameControl\",\r\n  initialState,\r\n  reducers: {\r\n    togglePause: (state, action) => {\r\n      state.isPause = !state.isPause;\r\n    },\r\n    setPause: (state, action) => {\r\n      state.isPause = true;\r\n    },\r\n    start: (state, action) => {\r\n      state.isGameOn = true;\r\n      state.isGameOver = false;\r\n      state.isPause = false;\r\n    },\r\n    setBtn: (state, action) => {\r\n      state.pressedBtn = action.payload;\r\n    },\r\n    clearBtn: (state, action) => {\r\n      state.pressedBtn = action.payload;\r\n    },\r\n    setGameOver: (state, action) => {\r\n      state.isGameOver = true;\r\n      state.isGameOn = false;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(\"restart\", (state, action) => {\r\n      state.isGameOn = true;\r\n      state.isGameOver = false;\r\n      state.isPause = false;\r\n    });\r\n  },\r\n});\r\n\r\nexport const {\r\n  togglePause,\r\n  setPause,\r\n  start,\r\n  setBtn,\r\n  clearBtn,\r\n  setGameOver,\r\n} = gameControlSlice.actions;\r\n\r\nexport default gameControlSlice.reducer;\r\n","const PIECES_CONFIG = {\r\n  I: {\r\n    base: {\r\n      cells: [13, 14, 15, 16],\r\n      checkLeft: [12],\r\n      checkRight: [17],\r\n      checkBottom: [23, 24, 25, 26],\r\n    },\r\n    left: {\r\n      cells: [-6, 4, 14, 24],\r\n      checkLeft: [-7, 3, 13, 23],\r\n      checkRight: [-5, 5, 15, 25],\r\n      checkBottom: [34],\r\n    },\r\n    reverse: {\r\n      cells: [13, 14, 15, 16],\r\n      checkLeft: [12],\r\n      checkRight: [17],\r\n      checkBottom: [23, 24, 25, 26],\r\n    },\r\n    right: {\r\n      cells: [-6, 4, 14, 24],\r\n      checkLeft: [-7, 3, 13, 23],\r\n      checkRight: [-5, 5, 15, 25],\r\n      checkBottom: [34],\r\n    },\r\n  },\r\n  O: {\r\n    base: {\r\n      cells: [4, 5, 14, 15],\r\n      checkLeft: [3, 13],\r\n      checkRight: [6, 16],\r\n      checkBottom: [24, 25],\r\n    },\r\n    left: {\r\n      cells: [4, 5, 14, 15],\r\n      checkLeft: [3, 13],\r\n      checkRight: [6, 16],\r\n      checkBottom: [24, 25],\r\n    },\r\n    reverse: {\r\n      cells: [4, 5, 14, 15],\r\n      checkLeft: [3, 13],\r\n      checkRight: [6, 16],\r\n      checkBottom: [24, 25],\r\n    },\r\n    right: {\r\n      cells: [4, 5, 14, 15],\r\n      checkLeft: [3, 13],\r\n      checkRight: [6, 16],\r\n      checkBottom: [24, 25],\r\n    },\r\n  },\r\n  L: {\r\n    base: {\r\n      cells: [6, 14, 15, 16],\r\n      checkLeft: [5, 13],\r\n      checkRight: [7, 17],\r\n      checkBottom: [24, 25, 26],\r\n    },\r\n    left: {\r\n      cells: [4, 5, 15, 25],\r\n      checkLeft: [3, 14, 24],\r\n      checkRight: [6, 16, 26],\r\n      checkBottom: [14, 35],\r\n    },\r\n    reverse: {\r\n      cells: [4, 5, 6, 14],\r\n      checkLeft: [3, 13],\r\n      checkRight: [7, 15],\r\n      checkBottom: [15, 16, 24],\r\n    },\r\n    right: {\r\n      cells: [4, 14, 24, 25],\r\n      checkLeft: [3, 13, 23],\r\n      checkRight: [5, 15, 26],\r\n      checkBottom: [34, 35],\r\n    },\r\n  },\r\n  J: {\r\n    base: {\r\n      cells: [4, 14, 15, 16],\r\n      checkLeft: [3, 13],\r\n      checkRight: [5, 17],\r\n      checkBottom: [24, 25, 26],\r\n    },\r\n    left: {\r\n      cells: [5, 15, 24, 25],\r\n      checkLeft: [4, 14, 23],\r\n      checkRight: [6, 16, 26],\r\n      checkBottom: [34, 35],\r\n    },\r\n    reverse: {\r\n      cells: [4, 5, 6, 16],\r\n      checkLeft: [3, 15],\r\n      checkRight: [7, 17],\r\n      checkBottom: [14, 15, 26],\r\n    },\r\n    right: {\r\n      cells: [4, 5, 14, 24],\r\n      checkLeft: [3, 13, 23],\r\n      checkRight: [6, 15, 25],\r\n      checkBottom: [15, 34],\r\n    },\r\n  },\r\n  S: {\r\n    base: {\r\n      cells: [5, 6, 14, 15],\r\n      checkLeft: [4, 13],\r\n      checkRight: [7, 16],\r\n      checkBottom: [16, 24, 25],\r\n    },\r\n    left: {\r\n      cells: [4, 14, 15, 25],\r\n      checkLeft: [3, 13, 24],\r\n      checkRight: [5, 16, 26],\r\n      checkBottom: [24, 35],\r\n    },\r\n    reverse: {\r\n      cells: [5, 6, 14, 15],\r\n      checkLeft: [4, 13],\r\n      checkRight: [7, 16],\r\n      checkBottom: [16, 24, 25],\r\n    },\r\n    right: {\r\n      cells: [4, 14, 15, 25],\r\n      checkLeft: [3, 13, 24],\r\n      checkRight: [5, 16, 26],\r\n      checkBottom: [24, 35],\r\n    },\r\n  },\r\n  Z: {\r\n    base: {\r\n      cells: [4, 5, 15, 16],\r\n      checkLeft: [3, 14],\r\n      checkRight: [6, 17],\r\n      checkBottom: [14, 25, 26],\r\n    },\r\n    left: {\r\n      cells: [6, 15, 16, 25],\r\n      checkLeft: [5, 14, 24],\r\n      checkRight: [7, 17, 26],\r\n      checkBottom: [26, 35],\r\n    },\r\n    reverse: {\r\n      cells: [4, 5, 15, 16],\r\n      checkLeft: [3, 14],\r\n      checkRight: [6, 17],\r\n      checkBottom: [14, 25, 26],\r\n    },\r\n    right: {\r\n      cells: [6, 15, 16, 25],\r\n      checkLeft: [5, 14, 24],\r\n      checkRight: [7, 17, 26],\r\n      checkBottom: [26, 35],\r\n    },\r\n  },\r\n  T: {\r\n    base: {\r\n      cells: [5, 14, 15, 16],\r\n      checkLeft: [4, 13],\r\n      checkRight: [6, 17],\r\n      checkBottom: [24, 25, 26],\r\n    },\r\n    left: {\r\n      cells: [5, 14, 15, 25],\r\n      checkLeft: [4, 13, 24],\r\n      checkRight: [6, 16, 26],\r\n      checkBottom: [24, 35],\r\n    },\r\n    reverse: {\r\n      cells: [4, 5, 6, 15],\r\n      checkLeft: [3, 14],\r\n      checkRight: [7, 16],\r\n      checkBottom: [14, 16, 25],\r\n    },\r\n    right: {\r\n      cells: [5, 15, 16, 25],\r\n      checkLeft: [4, 14, 24],\r\n      checkRight: [6, 17, 26],\r\n      checkBottom: [26, 35],\r\n    },\r\n  },\r\n};\r\n\r\nexport default PIECES_CONFIG;\r\n","const LEVEL_CONFIG = {\r\n  1: {\r\n    lev: 1,\r\n    speed: 850,\r\n    point: {\r\n      1: 40,\r\n      2: 100,\r\n      3: 300,\r\n      4: 900,\r\n    },\r\n  },\r\n  2: {\r\n    lev: 2,\r\n    speed: 760,\r\n    point: {\r\n      1: 80,\r\n      2: 200,\r\n      3: 600,\r\n      4: 1800,\r\n    },\r\n  },\r\n  3: {\r\n    lev: 3,\r\n    speed: 670,\r\n    point: {\r\n      1: 120,\r\n      2: 300,\r\n      3: 900,\r\n      4: 2700,\r\n    },\r\n  },\r\n  4: {\r\n    lev: 4,\r\n    speed: 580,\r\n    point: {\r\n      1: 160,\r\n      2: 400,\r\n      3: 1200,\r\n      4: 3600,\r\n    },\r\n  },\r\n  5: {\r\n    lev: 5,\r\n    speed: 500,\r\n    point: {\r\n      1: 200,\r\n      2: 500,\r\n      3: 1500,\r\n      4: 4500,\r\n    },\r\n  },\r\n  6: {\r\n    lev: 6,\r\n    speed: 410,\r\n    point: {\r\n      1: 240,\r\n      2: 600,\r\n      3: 1800,\r\n      4: 5400,\r\n    },\r\n  },\r\n  7: {\r\n    lev: 7,\r\n    speed: 350,\r\n    point: {\r\n      1: 280,\r\n      2: 700,\r\n      3: 2100,\r\n      4: 6300,\r\n    },\r\n  },\r\n  8: {\r\n    lev: 8,\r\n    speed: 290,\r\n    point: {\r\n      1: 320,\r\n      2: 800,\r\n      3: 2400,\r\n      4: 7200,\r\n    },\r\n  },\r\n  9: {\r\n    lev: 9,\r\n    speed: 250,\r\n    point: {\r\n      1: 360,\r\n      2: 900,\r\n      3: 2700,\r\n      4: 8100,\r\n    },\r\n  },\r\n  10: {\r\n    lev: 10,\r\n    speed: 200,\r\n    point: {\r\n      1: 400,\r\n      2: 1000,\r\n      3: 3000,\r\n      4: 9000,\r\n    },\r\n  },\r\n  11: {\r\n    lev: 11,\r\n    speed: 180,\r\n    point: {\r\n      1: 440,\r\n      2: 1100,\r\n      3: 3300,\r\n      4: 9900,\r\n    },\r\n  },\r\n  12: {\r\n    lev: 12,\r\n    speed: 150,\r\n    point: {\r\n      1: 480,\r\n      2: 1200,\r\n      3: 3600,\r\n      4: 10800,\r\n    },\r\n  },\r\n  13: {\r\n    lev: 13,\r\n    speed: 130,\r\n    point: {\r\n      1: 520,\r\n      2: 1300,\r\n      3: 3900,\r\n      4: 11700,\r\n    },\r\n  },\r\n  14: {\r\n    lev: 14,\r\n    speed: 110,\r\n    point: {\r\n      1: 560,\r\n      2: 1400,\r\n      3: 4200,\r\n      4: 12600,\r\n    },\r\n  },\r\n  15: {\r\n    lev: 15,\r\n    speed: 90,\r\n    point: {\r\n      1: 600,\r\n      2: 1500,\r\n      3: 4500,\r\n      4: 13500,\r\n    },\r\n  },\r\n  16: {\r\n    lev: 16,\r\n    speed: 70,\r\n    point: {\r\n      1: 640,\r\n      2: 1600,\r\n      3: 4800,\r\n      4: 14400,\r\n    },\r\n  },\r\n  17: {\r\n    lev: 17,\r\n    speed: 65,\r\n    point: {\r\n      1: 680,\r\n      2: 1700,\r\n      3: 5100,\r\n      4: 15300,\r\n    },\r\n  },\r\n  18: {\r\n    lev: 18,\r\n    speed: 60,\r\n    point: {\r\n      1: 720,\r\n      2: 1800,\r\n      3: 5400,\r\n      4: 16200,\r\n    },\r\n  },\r\n  19: {\r\n    lev: 19,\r\n    speed: 55,\r\n    point: {\r\n      1: 760,\r\n      2: 1900,\r\n      3: 5700,\r\n      4: 17100,\r\n    },\r\n  },\r\n  20: {\r\n    lev: 20,\r\n    speed: 45,\r\n    point: {\r\n      1: 800,\r\n      2: 2100,\r\n      3: 6300,\r\n      4: 18900,\r\n    },\r\n  },\r\n  21: {\r\n    lev: 21,\r\n    speed: 30,\r\n    point: {\r\n      1: 3333,\r\n      2: 7777,\r\n      3: 77777,\r\n      4: 777777,\r\n    },\r\n  },\r\n};\r\n\r\nexport default LEVEL_CONFIG;\r\n","import PIECES_CONFIG from \"./piecesConfig\";\r\nimport LINES_CONFIG from \"./levelsConfig\";\r\nimport { PIECES_TYPES, BASE_NUM } from \"./config\";\r\nimport _cloneDeep from \"lodash/cloneDeep\";\r\n\r\nexport const createPlayArea = () => {\r\n  const initialState = {};\r\n  for (let i = 10; i < 210; i++) {\r\n    initialState[i] = { isActive: false, match: false, id: i };\r\n  }\r\n  return initialState;\r\n};\r\n\r\nexport const createStatArea = () => {\r\n  const statAria = {};\r\n  const arrNum = [...BASE_NUM];\r\n  for (let i = 0; i < 8; i++) {\r\n    const num = arrNum.splice(0, 1);\r\n    statAria[num] = { isActive: false, id: i };\r\n  }\r\n  return statAria;\r\n};\r\n\r\nconst _mixArray = (array) => {\r\n  const arr = [...array];\r\n  for (let i = arr.length - 1; i > 0; i--) {\r\n    let j = Math.floor(Math.random() * (i + 1));\r\n    [arr[i], arr[j]] = [arr[j], arr[i]];\r\n  }\r\n  return arr;\r\n};\r\n\r\nexport const producePieces = () => {\r\n  const array = new Array(2).fill(PIECES_TYPES).flat();\r\n  return _mixArray(array);\r\n};\r\n\r\nexport const checkMovePermit = (playArea, piece, position, direction) => {\r\n  const { posType, x, y } = position;\r\n  const sum = x + y;\r\n  const cells = PIECES_CONFIG[piece][posType][direction];\r\n  const cellsToCheck = cells.map((i) => i + sum);\r\n\r\n  if (cellsToCheck.some((i) => i > 209)) return false;\r\n\r\n  if (\r\n    direction === \"checkLeft\" &&\r\n    cellsToCheck.some((i) =>\r\n      i < 0 ? String(i).match(/-\\d?1$/) : String(i).match(/9$/)\r\n    )\r\n  )\r\n    return false;\r\n\r\n  if (\r\n    direction === \"checkRight\" &&\r\n    cellsToCheck.some((i) =>\r\n      i < 0 ? String(i).match(/-\\d?0$/) : String(i).match(/0$/)\r\n    )\r\n  )\r\n    return false;\r\n\r\n  return !cellsToCheck.some((i) =>\r\n    i < 10 ? false : playArea[i].isActive === true\r\n  );\r\n};\r\n\r\nexport const checkRotation = (playArea, piece, piecePos, prevPos) => {\r\n  const { posType, x, y } = piecePos;\r\n  const sum = x + y;\r\n  const currCells = PIECES_CONFIG[piece][posType].cells;\r\n  const currCellsToCheck = currCells.map((i) => i + sum);\r\n  const prevCells = PIECES_CONFIG[piece][prevPos.posType].cells;\r\n  const prevCellsUnless = prevCells.map((i) => i + sum);\r\n  const cellsToCheck = currCellsToCheck.filter(\r\n    (i) => !prevCellsUnless.includes(i)\r\n  );\r\n\r\n  if (currCellsToCheck.some((i) => i > 209)) return false;\r\n\r\n  if (\r\n    currCellsToCheck.some((i) =>\r\n      i < 0 ? String(i).match(/-\\d?1$/) : String(i).match(/9$/)\r\n    ) &&\r\n    currCellsToCheck.some((i) =>\r\n      i < 0 ? String(i).match(/-\\d?0$/) : String(i).match(/0$/)\r\n    )\r\n  )\r\n    return false;\r\n\r\n  return !cellsToCheck.some((i) =>\r\n    i < 10 ? false : playArea[i].isActive === true\r\n  );\r\n};\r\n\r\nexport const getCells = (currentPiece, prevPos, nextPos) => {\r\n  const prevBaseCells = PIECES_CONFIG[currentPiece][prevPos.posType].cells;\r\n  const nextBaseCells = PIECES_CONFIG[currentPiece][nextPos.posType].cells;\r\n  const prevCells = prevBaseCells\r\n    .map((i) => i + prevPos.x + prevPos.y)\r\n    .filter((i) => i >= 10 && i < 210);\r\n  const nextCells = nextBaseCells\r\n    .map((i) => i + nextPos.x + nextPos.y)\r\n    .filter((i) => i >= 10 && i < 210);\r\n  return { prevCells, nextCells };\r\n};\r\n\r\nexport const setPositionOnTurn = (position) => {\r\n  const newPos = { ...position };\r\n  newPos.posType =\r\n    position.posType === \"base\"\r\n      ? \"left\"\r\n      : position.posType === \"left\"\r\n      ? \"reverse\"\r\n      : position.posType === \"reverse\"\r\n      ? \"right\"\r\n      : \"base\";\r\n\r\n  return newPos;\r\n};\r\n\r\nexport const setPositionOnDrop = (playArea, currentPiece, position) => {\r\n  const { posType, x, y } = position;\r\n  const sum = x + y;\r\n  const cells = PIECES_CONFIG[currentPiece][posType].checkBottom;\r\n  let cellsToCheck = cells.map((i) => i + sum);\r\n\r\n  let count = y;\r\n  while (count < 190) {\r\n    if (cellsToCheck.some((i) => i > 209 || playArea[i].isActive === true))\r\n      break;\r\n\r\n    count += 10;\r\n    cellsToCheck = cellsToCheck.map((i) => i + 10);\r\n  }\r\n  return { ...position, y: count };\r\n};\r\n\r\nexport const searchMatch = (playArea) => {\r\n  const res = { cells: [], rows: {} };\r\n  let matchCount = 0;\r\n\r\n  for (let i = 200; i >= 10 && matchCount < 4; i -= 10) {\r\n    let activeCells = 0;\r\n    let nonActiveCells = 0;\r\n\r\n    for (let j = 0; j < 10 && !(activeCells && nonActiveCells); j++) {\r\n      playArea[`${i + j}`].isActive ? activeCells++ : nonActiveCells++;\r\n    }\r\n\r\n    if (activeCells === 10) {\r\n      matchCount++;\r\n      res.rows[`${matchCount}`] = {\r\n        rowStartCell: i,\r\n      };\r\n      res.cells = [\r\n        ...res.cells,\r\n        ...Array.from({ length: 10 }, (el, ind) => i + ind),\r\n      ];\r\n    }\r\n    if (!activeCells) break;\r\n  }\r\n  return { ...res, newLines: matchCount };\r\n};\r\n\r\nexport const updPlayAreaWithMatches = (playArea, matches) => {\r\n  const clone = _cloneDeep(playArea);\r\n  const matchedRows = Object.values(matches).map((i) => i.rowStartCell);\r\n  const rowsBefore = [];\r\n  for (let i = matchedRows[0]; i > 10; i -= 10) {\r\n    rowsBefore.push(i);\r\n  }\r\n  const rowsWithoutMatches = rowsBefore.filter((i) => !matchedRows.includes(i));\r\n\r\n  let stop = false;\r\n  rowsBefore.forEach((i) => {\r\n    if (stop) return;\r\n\r\n    const rowForReplace = rowsWithoutMatches.splice(0, 1);\r\n    let activeCells = 0;\r\n    for (let j = 0; j < 10; j++) {\r\n      if (clone[`${i + j}`].isActive) activeCells++;\r\n      clone[`${i + j}`].isActive = clone[`${+rowForReplace + j}`].isActive;\r\n    }\r\n\r\n    if (!activeCells) stop = true;\r\n  });\r\n\r\n  return clone;\r\n};\r\n\r\nexport const checkGameOver = (playArea) => {\r\n  const cellsToCheck = [13, 14, 15, 16];\r\n  return cellsToCheck.some((i) => playArea[i].isActive);\r\n};\r\n\r\nexport const getScore = (prev, lines, level) => {\r\n  const point = LINES_CONFIG[level].point[lines];\r\n  return prev + point;\r\n};\r\n","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport PIECES_CONFIG from \"../../utils/piecesConfig\";\r\nimport {\r\n  createPlayArea,\r\n  createStatArea,\r\n  producePieces,\r\n  checkMovePermit,\r\n  getCells,\r\n  setPositionOnDrop,\r\n  setPositionOnTurn,\r\n  checkRotation,\r\n} from \"../../utils/utils\";\r\n\r\nconst initialPlayArea = createPlayArea();\r\nconst initialStatArea = createStatArea();\r\n\r\nexport const handleMatchesAsync = createAsyncThunk(\"main/matches\", async () => {\r\n  return await new Promise((resolve) => setTimeout(resolve, 500));\r\n});\r\n\r\nexport const gameOverAsync = createAsyncThunk(\r\n  \"main/gameOver\",\r\n  async (payload, { dispatch }) => {\r\n    let count = 20;\r\n\r\n    await new Promise((resolve) => {\r\n      setTimeout(function run() {\r\n        if (count <= 0) {\r\n          count = 1;\r\n          return resolve();\r\n        }\r\n        dispatch(fillCells(count * 10));\r\n        count--;\r\n        setTimeout(run, 40);\r\n      }, 40);\r\n    });\r\n    await new Promise((resolve) => {\r\n      setTimeout(function run() {\r\n        if (count > 20) {\r\n          return resolve();\r\n        }\r\n        dispatch(emptyCells(count * 10));\r\n        count++;\r\n        setTimeout(run, 40);\r\n      }, 40);\r\n    });\r\n    return;\r\n  }\r\n);\r\n\r\nconst initialState = {\r\n  playArea: initialPlayArea,\r\n  statArea: initialStatArea,\r\n  pieces: {\r\n    all: [],\r\n    current: \"\",\r\n    next: \"\",\r\n  },\r\n  position: {\r\n    posType: \"base\",\r\n    x: 0,\r\n    y: 0,\r\n  },\r\n  isRoundEnd: false,\r\n  isNeedSave: false,\r\n};\r\n\r\nconst mainSlice = createSlice({\r\n  name: \"main\",\r\n  initialState,\r\n  reducers: {\r\n    setPieces: (state, action) => {\r\n      // обновляем свойство state.pieces\r\n      if (state.pieces.all.length < 2) {\r\n        const newPieces = producePieces();\r\n        state.pieces.all = [...state.pieces.all, ...newPieces];\r\n      }\r\n      state.pieces.current = state.pieces.all.splice(0, 1)[0];\r\n      state.pieces.next = state.pieces.all[0];\r\n      // обновляем свойствa state.playArea && state.statArea\r\n      const currentCells = PIECES_CONFIG[state.pieces.current].base.cells;\r\n      const nextCells = PIECES_CONFIG[state.pieces.next].base.cells;\r\n      const filteredCells = currentCells.filter((i) => i >= 10 && i < 210);\r\n      Object.keys(state.statArea).forEach(\r\n        (i) => (state.statArea[i].isActive = false)\r\n      );\r\n      nextCells.forEach((i) => (state.statArea[i].isActive = true));\r\n      filteredCells.forEach((i) => (state.playArea[i].isActive = true));\r\n      // обновляем свойство state.position\r\n      state.position = initialState.position;\r\n      state.isRoundEnd = false;\r\n      state.isNeedSave = true;\r\n    },\r\n    drop: (state, action) => {\r\n      const playArea = state.playArea;\r\n      const piece = state.pieces.current;\r\n      const pos = state.position;\r\n      const newPos = setPositionOnDrop(playArea, piece, pos);\r\n      const { prevCells, nextCells } = getCells(piece, pos, newPos);\r\n      prevCells.forEach((i) => (state.playArea[i].isActive = false));\r\n      nextCells.forEach((i) => (state.playArea[i].isActive = true));\r\n      state.position = newPos;\r\n      state.isRoundEnd = true;\r\n    },\r\n    moveDown: (state, action) => {\r\n      const playArea = state.playArea;\r\n      const piece = state.pieces.current;\r\n      const pos = state.position;\r\n      if (checkMovePermit(playArea, piece, pos, \"checkBottom\")) {\r\n        const newPos = { ...pos, y: pos.y + 10 };\r\n        const { prevCells, nextCells } = getCells(piece, pos, newPos);\r\n        prevCells.forEach((i) => (state.playArea[i].isActive = false));\r\n        nextCells.forEach((i) => (state.playArea[i].isActive = true));\r\n        state.position = newPos;\r\n        return;\r\n      }\r\n      state.isRoundEnd = true;\r\n    },\r\n    moveLeft: (state, action) => {\r\n      const playArea = state.playArea;\r\n      const piece = state.pieces.current;\r\n      const pos = state.position;\r\n      if (checkMovePermit(playArea, piece, pos, \"checkLeft\")) {\r\n        const newPos = { ...pos, x: pos.x - 1 };\r\n        const { prevCells, nextCells } = getCells(piece, pos, newPos);\r\n        prevCells.forEach((i) => (state.playArea[i].isActive = false));\r\n        nextCells.forEach((i) => (state.playArea[i].isActive = true));\r\n        state.position = newPos;\r\n      }\r\n    },\r\n    moveRight: (state, action) => {\r\n      const playArea = state.playArea;\r\n      const piece = state.pieces.current;\r\n      const pos = state.position;\r\n      if (checkMovePermit(playArea, piece, pos, \"checkRight\")) {\r\n        const newPos = { ...pos, x: pos.x + 1 };\r\n        const { prevCells, nextCells } = getCells(piece, pos, newPos);\r\n        prevCells.forEach((i) => (state.playArea[i].isActive = false));\r\n        nextCells.forEach((i) => (state.playArea[i].isActive = true));\r\n        state.position = newPos;\r\n      }\r\n    },\r\n    turn: (state, action) => {\r\n      const playArea = state.playArea;\r\n      const piece = state.pieces.current;\r\n      const pos = state.position;\r\n      const newPos = setPositionOnTurn(pos);\r\n      if (checkRotation(playArea, piece, newPos, pos)) {\r\n        const { prevCells, nextCells } = getCells(piece, pos, newPos);\r\n        prevCells.forEach((i) => (state.playArea[i].isActive = false));\r\n        nextCells.forEach((i) => (state.playArea[i].isActive = true));\r\n        state.position = newPos;\r\n      }\r\n    },\r\n    fillCells: (state, action) => {\r\n      const num = action.payload;\r\n      const cells = Array.from({ length: 10 }, (el, ind) => num + ind);\r\n      cells.forEach((i) => (state.playArea[i].isActive = true));\r\n    },\r\n    emptyCells: (state, action) => {\r\n      const num = action.payload;\r\n      const cells = Array.from({ length: 10 }, (el, ind) => num + ind);\r\n      cells.forEach((i) => (state.playArea[i].isActive = false));\r\n    },\r\n    setSaved: (state, action) => {\r\n      state.isNeedSave = false;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(handleMatchesAsync.pending, (state, action) => {\r\n        action.meta.arg.cells.forEach((i) => (state.playArea[i].match = true));\r\n        state.isNeedSave = false;\r\n      })\r\n      .addCase(handleMatchesAsync.fulfilled, (state, action) => {\r\n        const { cells, newPlayArea } = action.meta.arg;\r\n        Object.entries(newPlayArea).forEach(\r\n          (i) => (state.playArea[i[0]].isActive = i[1].isActive)\r\n        );\r\n        cells.forEach((i) => (state.playArea[i].match = false));\r\n      })\r\n      .addCase(gameOverAsync.pending, (state, action) => {\r\n        state.isRoundEnd = true;\r\n      })\r\n      .addCase(gameOverAsync.fulfilled, (state, action) => initialState)\r\n      .addCase(\"restart\", (state, action) => initialState);\r\n  },\r\n});\r\n\r\nexport const {\r\n  setPieces,\r\n  drop,\r\n  moveDown,\r\n  moveLeft,\r\n  moveRight,\r\n  turn,\r\n  fillCells,\r\n  emptyCells,\r\n  setSaved,\r\n} = mainSlice.actions;\r\nexport default mainSlice.reducer;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport LEVEL_CONFIG from \"../../utils/levelsConfig\";\r\n\r\nconst initialState = {\r\n  score: 0,\r\n  record: 0,\r\n  lines: 0,\r\n  level: 1,\r\n  levelConfig: LEVEL_CONFIG[1],\r\n};\r\n\r\nconst statSlice = createSlice({\r\n  name: \"stat\",\r\n  initialState,\r\n  reducers: {\r\n    updateStat: (state, action) => {\r\n      const { newScore, newLines } = action.payload;\r\n      state.score = newScore;\r\n      if (state.record < state.score) {\r\n        state.record = state.score;\r\n      }\r\n      state.lines += newLines;\r\n    },\r\n    upLevel: (state, action) => {\r\n      state.level = action.payload;\r\n      state.levelConfig = LEVEL_CONFIG[state.level];\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(\"restart\", (state, action) => ({\r\n      ...initialState,\r\n      record: state.record,\r\n    }));\r\n  },\r\n});\r\n\r\nexport const { updateStat, upLevel } = statSlice.actions;\r\nexport default statSlice.reducer;\r\n","import { useEffect, useLayoutEffect, useRef } from \"react\";\r\n\r\nfunction useInterval(callback, delay) {\r\n  const savedCallback = useRef(callback);\r\n\r\n  useLayoutEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  useEffect(() => {\r\n    if (!delay && delay !== 0) {\r\n      return;\r\n    }\r\n\r\n    const id = setInterval(() => savedCallback.current(), delay);\r\n\r\n    return () => clearInterval(id);\r\n  }, [delay]);\r\n}\r\n\r\nexport default useInterval;\r\n","import \"./App.scss\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport Main from \"../Main/Main\";\r\nimport BrickGame from \"../BrickGame/BrickGame\";\r\nimport Footer from \"../Footer/Footer\";\r\nimport { useMediaQuery } from \"react-responsive\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { batch } from \"react-redux\";\r\nimport { gameControlSelectors } from \"../../services/selectors\";\r\nimport { mainSelectors } from \"../../services/selectors\";\r\nimport { statSelectors } from \"../../services/selectors\";\r\nimport {\r\n  start,\r\n  togglePause,\r\n  setPause,\r\n  setBtn,\r\n  clearBtn,\r\n  setGameOver,\r\n} from \"../../services/slices/gameControlSlice\";\r\nimport {\r\n  setPieces,\r\n  drop,\r\n  moveDown,\r\n  moveLeft,\r\n  moveRight,\r\n  turn,\r\n  handleMatchesAsync,\r\n  gameOverAsync,\r\n} from \"../../services/slices/mainSlice\";\r\nimport { updateStat, upLevel } from \"../../services/slices/statSlice\";\r\nimport useInterval from \"../../hooks/useInterval\";\r\nimport { MOVE_BUTTONS, CONTROL_KEYS } from \"../../utils/config\";\r\nimport {\r\n  searchMatch,\r\n  updPlayAreaWithMatches,\r\n  getScore,\r\n  checkGameOver,\r\n} from \"../../utils/utils\";\r\nimport { restart } from \"../../services/actionCreators\";\r\n\r\nfunction App() {\r\n  const [key, setKey] = useState(\"\");\r\n  const [wasFirstInvoke, setWasFirstInvoke] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const controlHandlers = useInterval;\r\n  const setMoveInterval = useInterval;\r\n  const isPause = useSelector(gameControlSelectors.isPause);\r\n  const isGameOn = useSelector(gameControlSelectors.isGameOn);\r\n  const isGameOver = useSelector(gameControlSelectors.isGameOver);\r\n  const pressedBtn = useSelector(gameControlSelectors.pressedBtn);\r\n  const speed = useSelector(statSelectors.speed);\r\n  const isRoundEnd = useSelector(mainSelectors.isRoundEnd);\r\n  const playArea = useSelector(mainSelectors.playArea);\r\n  const score = useSelector(statSelectors.score);\r\n  const level = useSelector(statSelectors.level);\r\n  const lines = useSelector(statSelectors.lines);\r\n\r\n  const isTablet = useMediaQuery({\r\n    query: \"(max-width: 768px)\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"keyup\", handleKeyup);\r\n    document.addEventListener(\"keydown\", handleKeydown);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleKeydown);\r\n      document.removeEventListener(\"keyup\", handleKeyup);\r\n    };\r\n  });\r\n\r\n  // Обработка результата раунда\r\n  useEffect(() => {\r\n    if (!isRoundEnd) return;\r\n    if (checkGameOver(playArea)) {\r\n      dispatch(setGameOver());\r\n      dispatch(gameOverAsync()).then(() => dispatch(setPause()));\r\n      return;\r\n    }\r\n    const { cells, rows, newLines } = searchMatch(playArea);\r\n\r\n    if (newLines > 0) {\r\n      const newPlayArea = updPlayAreaWithMatches(playArea, rows);\r\n      const newScore = getScore(score, newLines, level);\r\n      const sumLines = lines + newLines;\r\n      dispatch(handleMatchesAsync({ cells, newPlayArea })).then(() => {\r\n        batch(() => {\r\n          dispatch(updateStat({ newScore, newLines }));\r\n          dispatch(setPieces());\r\n          if (String(sumLines).startsWith(String(level)) && sumLines !== 1) {\r\n            dispatch(upLevel(level + 1));\r\n          }\r\n        });\r\n      });\r\n      return;\r\n    }\r\n\r\n    dispatch(setPieces());\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isRoundEnd]);\r\n\r\n  //  Обработчики нажатий клавиш клавиатуры\r\n\r\n  const handleDrop = () => {\r\n    batch(() => {\r\n      dispatch(setBtn(\"drop\"));\r\n      dispatch(drop());\r\n    });\r\n  };\r\n\r\n  const handleTurnPiece = () => {\r\n    batch(() => {\r\n      dispatch(setBtn(\"turn\"));\r\n      dispatch(turn());\r\n    });\r\n  };\r\n\r\n  const handleMoveLeft = () => {\r\n    batch(() => {\r\n      dispatch(setBtn(\"left\"));\r\n      dispatch(moveLeft());\r\n    });\r\n  };\r\n\r\n  const handleMoveRight = () => {\r\n    batch(() => {\r\n      dispatch(setBtn(\"right\"));\r\n      dispatch(moveRight());\r\n    });\r\n  };\r\n\r\n  const handleMoveDown = (isTimer) => {\r\n    if (isTimer) {\r\n      return dispatch(moveDown());\r\n    }\r\n    batch(() => {\r\n      dispatch(setBtn(\"down\"));\r\n      dispatch(moveDown());\r\n    });\r\n  };\r\n\r\n  const startGame = (restartKey) => {\r\n    batch(() => {\r\n      if (restartKey) dispatch(setBtn(\"restart\"));\r\n      if (isGameOver || restartKey) {\r\n        dispatch(restart());\r\n      }\r\n      dispatch(start());\r\n      dispatch(setPieces());\r\n    });\r\n  };\r\n\r\n  const handlePause = () => {\r\n    dispatch(setBtn(\"pause\"));\r\n    isGameOn ? dispatch(togglePause()) : startGame();\r\n  };\r\n\r\n  const handleKeydown = (e) => {\r\n    if (!isPause) e.preventDefault();\r\n    if (isRoundEnd || key === e.key || key === e.keyCode) return;\r\n\r\n    if (CONTROL_KEYS.pause.includes(e.key)) {\r\n      setKey(e.key);\r\n      return handlePause();\r\n    }\r\n\r\n    if (CONTROL_KEYS.restart.includes(e.key)) {\r\n      setKey(e.key);\r\n      startGame(\"restart\");\r\n      return;\r\n    }\r\n\r\n    if (isGameOver || isPause) return;\r\n\r\n    if (CONTROL_KEYS.turn.includes(e.key)) {\r\n      setKey(e.key);\r\n      return handleTurnPiece();\r\n    }\r\n\r\n    if (CONTROL_KEYS.left.includes(e.key)) {\r\n      setKey(e.key);\r\n      return handleMoveLeft();\r\n    }\r\n\r\n    if (CONTROL_KEYS.right.includes(e.key)) {\r\n      setKey(e.key);\r\n      return handleMoveRight();\r\n    }\r\n\r\n    if (CONTROL_KEYS.down.includes(e.key)) {\r\n      setKey(e.key);\r\n      return handleMoveDown();\r\n    }\r\n\r\n    if (CONTROL_KEYS.drop.includes(e.keyCode)) {\r\n      setKey(e.keyCode);\r\n      return handleDrop();\r\n    }\r\n  };\r\n\r\n  const handleKeyup = (e) => {\r\n    setKey(\"\");\r\n    setWasFirstInvoke(false);\r\n    dispatch(clearBtn());\r\n  };\r\n\r\n  // Обработчики touch и mouse событий\r\n  const handlePressDown = (key) => {\r\n    if (pressedBtn === key || isRoundEnd) return;\r\n    key === \"restart\"\r\n      ? startGame(\"restart\")\r\n      : key === \"pause\"\r\n      ? handlePause()\r\n      : void 0;\r\n    if (isGameOver || isPause) return;\r\n    key === \"turn\"\r\n      ? handleTurnPiece()\r\n      : key === \"left\"\r\n      ? handleMoveLeft()\r\n      : key === \"right\"\r\n      ? handleMoveRight()\r\n      : key === \"down\"\r\n      ? handleMoveDown()\r\n      : key === \"drop\"\r\n      ? handleDrop()\r\n      : void 0;\r\n  };\r\n\r\n  const handlePressUp = () => {\r\n    setWasFirstInvoke(false);\r\n    dispatch(clearBtn());\r\n  };\r\n\r\n  // Устранение страндартной задержки keydown\r\n\r\n  const controlHandlersDelay = useMemo(() => {\r\n    if (MOVE_BUTTONS.includes(pressedBtn)) {\r\n      if (pressedBtn === \"turn\" || pressedBtn === \"drop\") return 170;\r\n      if (wasFirstInvoke) return 50;\r\n      return 110;\r\n    } else {\r\n      return null;\r\n    }\r\n  }, [pressedBtn, wasFirstInvoke]);\r\n\r\n  controlHandlers(() => {\r\n    wasFirstInvoke ? void 0 : setWasFirstInvoke(true);\r\n\r\n    return pressedBtn === \"drop\"\r\n      ? handleDrop()\r\n      : pressedBtn === \"turn\"\r\n      ? handleTurnPiece()\r\n      : pressedBtn === \"left\"\r\n      ? handleMoveLeft()\r\n      : pressedBtn === \"right\"\r\n      ? handleMoveRight()\r\n      : pressedBtn === \"down\"\r\n      ? handleMoveDown()\r\n      : () => void 0;\r\n  }, controlHandlersDelay);\r\n\r\n  // Установка таймера на движение фигур вниз, и её перемещение вниз\r\n\r\n  const moveDownDelay = useMemo(() => {\r\n    if (pressedBtn === \"down\") {\r\n      return null;\r\n    } else {\r\n      return isPause || isGameOver || isRoundEnd ? null : speed;\r\n    }\r\n  }, [pressedBtn, speed, isPause, isGameOver, isRoundEnd]);\r\n\r\n  setMoveInterval(() => handleMoveDown(\"timer\"), moveDownDelay);\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <Main>\r\n        <BrickGame\r\n          onDown={handlePressDown}\r\n          onUp={handlePressUp}\r\n          isTablet={isTablet}\r\n        />\r\n      </Main>\r\n      {!isTablet && <Footer />}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","export const restart = (payload) => ({ type: \"restart\", payload });\r\n","const reportWebVitals = (onPerfEntry) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport mainReduser from \"./slices/mainSlice\";\nimport statReduser from \"./slices/statSlice\";\nimport gameControlReduser from \"./slices/gameControlSlice\";\nimport { setSaved } from \"./slices/mainSlice\";\nimport throttle from \"lodash/throttle\";\n\nconst preloadedState = localStorage.getItem(\"reduxState\")\n  ? JSON.parse(localStorage.getItem(\"reduxState\"))\n  : {};\n\nexport const store = configureStore({\n  reducer: {\n    main: mainReduser,\n    stat: statReduser,\n    gameControl: gameControlReduser,\n  },\n  preloadedState,\n  devTools: false,\n});\n\nconst saveToLocalStorage = () =>\n  localStorage.setItem(\"reduxState\", JSON.stringify(store.getState()));\n\nstore.subscribe(() => {\n  const { isRoundEnd, isNeedSave } = store.getState().main;\n  const isPause = store.getState().gameControl.isPause;\n  if (isRoundEnd) return;\n  if (isNeedSave) {\n    saveToLocalStorage();\n    store.dispatch(setSaved());\n  }\n  if (isPause) {\n    saveToLocalStorage();\n  }\n  throttle(saveToLocalStorage, 1000);\n});\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/App/App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./services/store\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}