(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{161:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),o=n(21),i=n.n(o),a=(n(63),n(7)),s=(n(64),n(65),n(0));var l=function(e){var t=e.children;return Object(s.jsx)("main",{className:"main",children:t})},u=n(3),f=n(58),d=(n(67),n(68),n(69),n(70),n(9)),h=n.n(d);function p(e){var t=e.state,n=e.match,c=h()("block",{block_active:t&&!n,block_matched:n});return Object(s.jsx)("li",{className:c})}var m=Object(c.memo)(p),b=n(5);n(71);var j=function(e){var t=e.text,n=e.mix,c=h()("title",Object(b.a)({},"".concat(n),n));return Object(s.jsx)("p",{className:c,children:t})},v=function(e){return e.gameControl.isPause},O=function(e){return e.gameControl.isGameOn},k=function(e){return e.gameControl.isGameOver},g=function(e){return e.gameControl.pressedBtn},y=function(e){return e.main.playArea},x=function(e){return e.main.statArea},A=function(e){return e.main.isRoundEnd},w=function(e){return e.stat.score},_=function(e){return e.stat.record},L=function(e){return e.stat.lines},S=function(e){return e.stat.level},C=function(e){return e.stat.levelConfig.speed},R=n(2);var B=function(){var e=Object(R.d)(y),t=Object(R.d)(v),n=Object(R.d)(O),c=Object(R.d)(k);return Object(s.jsxs)("div",{className:"play-area",children:[Object(s.jsx)("ul",{className:"play-area__list",children:Object.entries(e).map((function(e){var t=Object(a.a)(e,2),n=(t[0],t[1]);return Object(s.jsx)(m,{state:n.isActive,match:n.match},n.id)}))}),t&&Object(s.jsxs)("div",{className:"play-area__cover",children:[n&&Object(s.jsx)(j,{text:"\u041f\u0430\u0443\u0437\u0430",mix:"play-area__pause"}),!n&&!c&&Object(s.jsx)(j,{text:"\u0416\u043c\u0438\n\u0441\u0442\u0430\u0440\u0442",mix:"play-area__start"}),c&&Object(s.jsx)(j,{text:"\u041a\u043e\u043d\u0435\u0446\n\u0438\u0433\u0440\u044b",mix:"play-area__end"})]})]})};n(78);var E=function(){var e=Object(R.d)(w),t=Object(R.d)(_),n=Object(R.d)(L),c=Object(R.d)(S),r=Object(R.d)(x);return Object(s.jsxs)("div",{className:"game-stat",children:[Object(s.jsx)("h2",{className:"game-stat__title",children:"\u041e\u0447\u043a\u0438:"}),Object(s.jsx)("p",{className:"game-stat__value",children:e}),Object(s.jsx)("h2",{className:"game-stat__title",children:"\u041b\u0438\u043d\u0438\u0438:"}),Object(s.jsx)("p",{className:"game-stat__value",children:n}),Object(s.jsx)("h2",{className:"game-stat__title",children:"\u0423\u0440\u043e\u0432\u0435\u043d\u044c:"}),Object(s.jsx)("p",{className:"game-stat__value",children:c}),Object(s.jsx)("h2",{className:"game-stat__title",children:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f:"}),Object(s.jsx)("ul",{className:"game-stat__list",children:Object.entries(r).map((function(e){var t=Object(a.a)(e,2),n=(t[0],t[1]);return Object(s.jsx)(m,{state:n.isActive,match:n.match},n.id)}))}),Object(s.jsx)("h2",{className:"game-stat__title",children:"\u0420\u0435\u043a\u043e\u0440\u0434:"}),Object(s.jsx)("p",{className:"game-stat__value",children:t})]})};var T=function(){return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("h1",{className:"container__title",children:"\u0422\u0435\u0442\u0440\u0438\u0441"}),Object(s.jsxs)("div",{className:"screen",children:[Object(s.jsx)(B,{}),Object(s.jsx)(E,{})]})]})};n(79),n(80);var N=function(e){var t,n=e.type,c=e.ariaLabel,r=e.modSize,o=e.modColor,i=e.modShadow,a=e.mix,l=e.onDown,u=e.onUp,f=e.isTablet,d=h()("btn",(t={},Object(b.a)(t,"btn_size_".concat(r),r),Object(b.a)(t,"btn_color_".concat(o),o),Object(b.a)(t,"btn_shadow_".concat(i),i),t),Object(b.a)({},"".concat(a),a));return Object(s.jsx)("button",{className:d,type:n,"aria-label":c,onMouseDown:f?null:l,onMouseUp:f?null:u,onTouchStart:f?l:null,onTouchEnd:f?u:null})};var P=function(e){var t=e.onDown,n=e.onUp,c=e.isTablet,r=Object(R.d)(g),o=""===r?null:["restart","pause"].includes(r)?"reverse-s":"reverse-m";return Object(s.jsxs)("div",{className:"control-panel",children:[Object(s.jsxs)("div",{className:"control-panel__main",children:[Object(s.jsx)(N,{type:"button",ariaLabel:"\u0432\u043b\u0435\u0432\u043e",modSize:c?"mobile":"m",modColor:"yellow",modShadow:"left"===r?o:null,mix:"control-panel__left",onDown:function(){return t("left")},onUp:function(){return n()},isTablet:c}),Object(s.jsx)(N,{type:"button",ariaLabel:"\u0432\u043d\u0438\u0437",modSize:c?"mobile":"m",modColor:"yellow",modShadow:"down"===r?o:null,mix:"control-panel__down",onDown:function(){return t("down")},onUp:function(){return n()},isTablet:c}),Object(s.jsx)(N,{type:"button",ariaLabel:"\u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u044c",modSize:c?"mobile":"m",modColor:"yellow",modShadow:"turn"===r?o:null,mix:"control-panel__up",onDown:function(){return t("turn")},onUp:function(){return n()},isTablet:c}),Object(s.jsx)(N,{type:"button",ariaLabel:"\u0432\u043f\u0440\u0430\u0432\u043e",modSize:c?"mobile":"m",modColor:"yellow",modShadow:"right"===r?o:null,mix:"control-panel__right",onDown:function(){return t("right")},onUp:function(){return n()},isTablet:c})]}),Object(s.jsxs)("div",{className:"control-panel__top",children:[Object(s.jsx)(N,{type:"button",ariaLabel:"\u043a\u043d\u043e\u043f\u043a\u0430 \u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c",modSize:"s",modColor:"red",modShadow:"restart"===r?o:null,mix:"control-panel__small-btn",onDown:function(){return t("restart")},onUp:function(){return n()},isTablet:c}),Object(s.jsx)(N,{type:"button",ariaLabel:"\u043a\u043d\u043e\u043f\u043a\u0430 \u043f\u0430\u0443\u0437\u0430/\u0441\u0442\u0430\u0440\u0442",modSize:"s",modColor:"green",modShadow:"pause"===r?o:null,mix:"control-panel__small-btn",onDown:function(){return t("pause")},onUp:function(){return n()},isTablet:c}),Object(s.jsx)(N,{type:"button",ariaLabel:"\u043a\u043d\u043e\u043f\u043a\u0430 \u0443\u0440\u043e\u043d\u0438\u0442\u044c",modSize:c?"mobile":"l",modColor:"yellow",modShadow:"drop"===r?o:null,mix:"control-panel__drop",onDown:function(){return t("drop")},onUp:function(){return n()},isTablet:c})]})]})};n(81);var D=function(e){var t=e.link,n=e.iconAlt,c=e.icon,r=e.mix,o=h()("link",Object(b.a)({},"".concat(r),r));return Object(s.jsxs)("a",{href:t,target:"_blank",rel:"noreferrer",className:o,children:[Object(s.jsx)("img",{src:c,alt:n,className:"link__icon"})," Github"]})},G=n.p+"static/media/github_icon.0f101c29.svg",U=["I","O","L","J","S","Z","T"],z=[3,4,5,6,13,14,15,16],I=["left","right","down","turn","drop"],M={pause:["p","P","\u0437","\u0417"],restart:["r","R","\u043a","\u041a"],left:["ArrowLeft","a","A","\u0444","\u0424"],right:["ArrowRight","d","D","\u0432","\u0412"],down:["ArrowDown","s","S","\u044b","\u042b"],turn:["ArrowUp","w","W","\u0446","\u0426"],drop:[32]},$="https://github.com/apl-by/tetris";var J=function(e){var t=e.isTablet,n=Object(f.a)(e,["isTablet"]);return Object(s.jsxs)("section",{className:"brick-game",children:[t&&Object(s.jsx)(D,{link:$,icon:G,iconAlt:"\u0438\u043a\u043e\u043d\u043a\u0430 github",mix:"brick-game__link"}),Object(s.jsx)(T,{}),Object(s.jsx)(P,Object(u.a)(Object(u.a)({},n),{},{isTablet:t}))]})};n(82);var F=function(){var e=Object(c.useState)(2021),t=Object(a.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=(new Date).getFullYear();e>2021&&r("2021-".concat(e))}),[]),Object(s.jsxs)("footer",{className:"footer",children:[Object(s.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",n,' "\u041f\u0440\u043e\u0435\u043a\u0442 - \u0442\u0435\u0442\u0440\u0438\u0441"']}),Object(s.jsx)(D,{link:$,icon:G,iconAlt:"\u0438\u043a\u043e\u043d\u043a\u0430 github"})]})},W=n(55),Z=n(6),q=Object(Z.c)({name:"gameControl",initialState:{isPause:!0,isGameOn:!1,isGameOver:!1,pressedBtn:""},reducers:{togglePause:function(e,t){e.isPause=!e.isPause},setPause:function(e,t){e.isPause=!0},start:function(e,t){e.isGameOn=!0,e.isGameOver=!1,e.isPause=!1},setBtn:function(e,t){e.pressedBtn=t.payload},clearBtn:function(e,t){e.pressedBtn=t.payload},setGameOver:function(e,t){e.isGameOver=!0,e.isGameOn=!1}},extraReducers:function(e){e.addCase("restart",(function(e,t){e.isGameOn=!0,e.isGameOver=!1,e.isPause=!1}))}}),Q=q.actions,Y=Q.togglePause,H=Q.setPause,K=Q.start,V=Q.setBtn,X=Q.clearBtn,ee=Q.setGameOver,te=q.reducer,ne=n(10),ce=n(15),re=n.n(ce),oe=n(37),ie={I:{base:{cells:[13,14,15,16],checkLeft:[12],checkRight:[17],checkBottom:[23,24,25,26]},left:{cells:[-6,4,14,24],checkLeft:[-7,3,13,23],checkRight:[-5,5,15,25],checkBottom:[34]},reverse:{cells:[13,14,15,16],checkLeft:[12],checkRight:[17],checkBottom:[23,24,25,26]},right:{cells:[-6,4,14,24],checkLeft:[-7,3,13,23],checkRight:[-5,5,15,25],checkBottom:[34]}},O:{base:{cells:[4,5,14,15],checkLeft:[3,13],checkRight:[6,16],checkBottom:[24,25]},left:{cells:[4,5,14,15],checkLeft:[3,13],checkRight:[6,16],checkBottom:[24,25]},reverse:{cells:[4,5,14,15],checkLeft:[3,13],checkRight:[6,16],checkBottom:[24,25]},right:{cells:[4,5,14,15],checkLeft:[3,13],checkRight:[6,16],checkBottom:[24,25]}},L:{base:{cells:[6,14,15,16],checkLeft:[5,13],checkRight:[7,17],checkBottom:[24,25,26]},left:{cells:[4,5,15,25],checkLeft:[3,14,24],checkRight:[6,16,26],checkBottom:[14,35]},reverse:{cells:[4,5,6,14],checkLeft:[3,13],checkRight:[7,15],checkBottom:[15,16,24]},right:{cells:[4,14,24,25],checkLeft:[3,13,23],checkRight:[5,15,26],checkBottom:[34,35]}},J:{base:{cells:[4,14,15,16],checkLeft:[3,13],checkRight:[5,17],checkBottom:[24,25,26]},left:{cells:[5,15,24,25],checkLeft:[4,14,23],checkRight:[6,16,26],checkBottom:[34,35]},reverse:{cells:[4,5,6,16],checkLeft:[3,15],checkRight:[7,17],checkBottom:[14,15,26]},right:{cells:[4,5,14,24],checkLeft:[3,13,23],checkRight:[6,15,25],checkBottom:[15,34]}},S:{base:{cells:[5,6,14,15],checkLeft:[4,13],checkRight:[7,16],checkBottom:[16,24,25]},left:{cells:[4,14,15,25],checkLeft:[3,13,24],checkRight:[5,16,26],checkBottom:[24,35]},reverse:{cells:[5,6,14,15],checkLeft:[4,13],checkRight:[7,16],checkBottom:[16,24,25]},right:{cells:[4,14,15,25],checkLeft:[3,13,24],checkRight:[5,16,26],checkBottom:[24,35]}},Z:{base:{cells:[4,5,15,16],checkLeft:[3,14],checkRight:[6,17],checkBottom:[14,25,26]},left:{cells:[6,15,16,25],checkLeft:[5,14,24],checkRight:[7,17,26],checkBottom:[26,35]},reverse:{cells:[4,5,15,16],checkLeft:[3,14],checkRight:[6,17],checkBottom:[14,25,26]},right:{cells:[6,15,16,25],checkLeft:[5,14,24],checkRight:[7,17,26],checkBottom:[26,35]}},T:{base:{cells:[5,14,15,16],checkLeft:[4,13],checkRight:[6,17],checkBottom:[24,25,26]},left:{cells:[5,14,15,25],checkLeft:[4,13,24],checkRight:[6,16,26],checkBottom:[24,35]},reverse:{cells:[4,5,6,15],checkLeft:[3,14],checkRight:[7,16],checkBottom:[14,16,25]},right:{cells:[5,15,16,25],checkLeft:[4,14,24],checkRight:[6,17,26],checkBottom:[26,35]}}},ae={1:{lev:1,speed:850,point:{1:40,2:100,3:300,4:900}},2:{lev:2,speed:760,point:{1:80,2:200,3:600,4:1800}},3:{lev:3,speed:670,point:{1:120,2:300,3:900,4:2700}},4:{lev:4,speed:580,point:{1:160,2:400,3:1200,4:3600}},5:{lev:5,speed:500,point:{1:200,2:500,3:1500,4:4500}},6:{lev:6,speed:410,point:{1:240,2:600,3:1800,4:5400}},7:{lev:7,speed:350,point:{1:280,2:700,3:2100,4:6300}},8:{lev:8,speed:290,point:{1:320,2:800,3:2400,4:7200}},9:{lev:9,speed:250,point:{1:360,2:900,3:2700,4:8100}},10:{lev:10,speed:200,point:{1:400,2:1e3,3:3e3,4:9e3}},11:{lev:11,speed:180,point:{1:440,2:1100,3:3300,4:9900}},12:{lev:12,speed:150,point:{1:480,2:1200,3:3600,4:10800}},13:{lev:13,speed:130,point:{1:520,2:1300,3:3900,4:11700}},14:{lev:14,speed:110,point:{1:560,2:1400,3:4200,4:12600}},15:{lev:15,speed:90,point:{1:600,2:1500,3:4500,4:13500}},16:{lev:16,speed:70,point:{1:640,2:1600,3:4800,4:14400}},17:{lev:17,speed:65,point:{1:680,2:1700,3:5100,4:15300}},18:{lev:18,speed:60,point:{1:720,2:1800,3:5400,4:16200}},19:{lev:19,speed:55,point:{1:760,2:1900,3:5700,4:17100}},20:{lev:20,speed:45,point:{1:800,2:2100,3:6300,4:18900}},21:{lev:21,speed:30,point:{1:3333,2:7777,3:77777,4:777777}}},se=n(56),le=n.n(se),ue=function(){return function(e){for(var t=Object(ne.a)(e),n=t.length-1;n>0;n--){var c=Math.floor(Math.random()*(n+1)),r=[t[c],t[n]];t[n]=r[0],t[c]=r[1]}return t}(new Array(2).fill(U).flat())},fe=function(e,t,n,c){var r=n.posType,o=n.x+n.y,i=ie[t][r][c].map((function(e){return e+o}));return!i.some((function(e){return e>209}))&&(("checkLeft"!==c||!i.some((function(e){return e<0?String(e).match(/-\d?1$/):String(e).match(/9$/)})))&&(("checkRight"!==c||!i.some((function(e){return e<0?String(e).match(/-\d?0$/):String(e).match(/0$/)})))&&!i.some((function(t){return!(t<10)&&!0===e[t].isActive}))))},de=function(e,t,n){var c=ie[e][t.posType].cells,r=ie[e][n.posType].cells;return{prevCells:c.map((function(e){return e+t.x+t.y})).filter((function(e){return e>=10&&e<210})),nextCells:r.map((function(e){return e+n.x+n.y})).filter((function(e){return e>=10&&e<210}))}},he=function(){for(var e={},t=10;t<210;t++)e[t]={isActive:!1,match:!1,id:t};return e}(),pe=function(){for(var e={},t=Object(ne.a)(z),n=0;n<8;n++){e[t.splice(0,1)]={isActive:!1,id:n}}return e}(),me=Object(Z.b)("main/matches",Object(oe.a)(re.a.mark((function e(){return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),be=Object(Z.b)("main/gameOver",function(){var e=Object(oe.a)(re.a.mark((function e(t,n){var c,r;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.dispatch,r=20,e.next=4,new Promise((function(e){setTimeout((function t(){if(r<=0)return r=1,e();c(_e(10*r)),r--,setTimeout(t,40)}),40)}));case 4:return e.next=6,new Promise((function(e){setTimeout((function t(){if(r>20)return e();c(Le(10*r)),r++,setTimeout(t,40)}),40)}));case 6:return e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),je={playArea:he,statArea:pe,pieces:{all:[],current:"",next:""},position:{posType:"base",x:0,y:0},isRoundEnd:!1},ve=Object(Z.c)({name:"main",initialState:je,reducers:{setPieces:function(e,t){if(e.pieces.all.length<2){var n=ue();e.pieces.all=[].concat(Object(ne.a)(e.pieces.all),Object(ne.a)(n))}e.pieces.current=e.pieces.all.splice(0,1)[0],e.pieces.next=e.pieces.all[0];var c=ie[e.pieces.current].base.cells,r=ie[e.pieces.next].base.cells,o=c.filter((function(e){return e>=10&&e<210}));Object.keys(e.statArea).forEach((function(t){return e.statArea[t].isActive=!1})),r.forEach((function(t){return e.statArea[t].isActive=!0})),o.forEach((function(t){return e.playArea[t].isActive=!0})),e.position=je.position,e.isRoundEnd=!1},drop:function(e,t){var n=e.playArea,c=e.pieces.current,r=e.position,o=function(e,t,n){for(var c=n.posType,r=n.x,o=n.y,i=r+o,a=ie[t][c].checkBottom.map((function(e){return e+i})),s=o;s<190&&!a.some((function(t){return t>209||!0===e[t].isActive}));)s+=10,a=a.map((function(e){return e+10}));return Object(u.a)(Object(u.a)({},n),{},{y:s})}(n,c,r),i=de(c,r,o),a=i.prevCells,s=i.nextCells;a.forEach((function(t){return e.playArea[t].isActive=!1})),s.forEach((function(t){return e.playArea[t].isActive=!0})),e.position=o,e.isRoundEnd=!0},moveDown:function(e,t){var n=e.playArea,c=e.pieces.current,r=e.position;if(fe(n,c,r,"checkBottom")){var o=Object(u.a)(Object(u.a)({},r),{},{y:r.y+10}),i=de(c,r,o),a=i.prevCells,s=i.nextCells;return a.forEach((function(t){return e.playArea[t].isActive=!1})),s.forEach((function(t){return e.playArea[t].isActive=!0})),void(e.position=o)}e.isRoundEnd=!0},moveLeft:function(e,t){var n=e.playArea,c=e.pieces.current,r=e.position;if(fe(n,c,r,"checkLeft")){var o=Object(u.a)(Object(u.a)({},r),{},{x:r.x-1}),i=de(c,r,o),a=i.prevCells,s=i.nextCells;a.forEach((function(t){return e.playArea[t].isActive=!1})),s.forEach((function(t){return e.playArea[t].isActive=!0})),e.position=o}},moveRight:function(e,t){var n=e.playArea,c=e.pieces.current,r=e.position;if(fe(n,c,r,"checkRight")){var o=Object(u.a)(Object(u.a)({},r),{},{x:r.x+1}),i=de(c,r,o),a=i.prevCells,s=i.nextCells;a.forEach((function(t){return e.playArea[t].isActive=!1})),s.forEach((function(t){return e.playArea[t].isActive=!0})),e.position=o}},turn:function(e,t){var n=e.playArea,c=e.pieces.current,r=e.position,o=function(e){var t=Object(u.a)({},e);return t.posType="base"===e.posType?"left":"left"===e.posType?"reverse":"reverse"===e.posType?"right":"base",t}(r);if(function(e,t,n,c){var r=n.posType,o=n.x+n.y,i=ie[t][r].cells.map((function(e){return e+o})),a=ie[t][c.posType].cells.map((function(e){return e+o})),s=i.filter((function(e){return!a.includes(e)}));return!i.some((function(e){return e>209}))&&(!i.some((function(e){return e<0?String(e).match(/-\d?1$/):String(e).match(/9$/)}))||!i.some((function(e){return e<0?String(e).match(/-\d?0$/):String(e).match(/0$/)})))&&!s.some((function(t){return!(t<10)&&!0===e[t].isActive}))}(n,c,o,r)){var i=de(c,r,o),a=i.prevCells,s=i.nextCells;a.forEach((function(t){return e.playArea[t].isActive=!1})),s.forEach((function(t){return e.playArea[t].isActive=!0})),e.position=o}},fillCells:function(e,t){var n=t.payload;Array.from({length:10},(function(e,t){return n+t})).forEach((function(t){return e.playArea[t].isActive=!0}))},emptyCells:function(e,t){var n=t.payload;Array.from({length:10},(function(e,t){return n+t})).forEach((function(t){return e.playArea[t].isActive=!1}))}},extraReducers:function(e){e.addCase(me.pending,(function(e,t){t.meta.arg.cells.forEach((function(t){return e.playArea[t].match=!0}))})).addCase(me.fulfilled,(function(e,t){var n=t.meta.arg,c=n.cells,r=n.newPlayArea;Object.entries(r).forEach((function(t){return e.playArea[t[0]].isActive=t[1].isActive})),c.forEach((function(t){return e.playArea[t].match=!1}))})).addCase(be.pending,(function(e,t){e.isRoundEnd=!0})).addCase(be.fulfilled,(function(e,t){return je})).addCase("restart",(function(e,t){return je}))}}),Oe=ve.actions,ke=Oe.setPieces,ge=Oe.drop,ye=Oe.moveDown,xe=Oe.moveLeft,Ae=Oe.moveRight,we=Oe.turn,_e=Oe.fillCells,Le=Oe.emptyCells,Se=ve.reducer,Ce={score:0,record:0,lines:0,level:1,levelConfig:ae[1]},Re=Object(Z.c)({name:"stat",initialState:Ce,reducers:{updateStat:function(e,t){var n=t.payload,c=n.newScore,r=n.newLines;e.score=c,e.record<e.score&&(e.record=e.score),e.lines+=r},upLevel:function(e,t){e.level=t.payload,e.levelConfig=ae[e.level]}},extraReducers:function(e){e.addCase("restart",(function(e,t){return Object(u.a)(Object(u.a)({},Ce),{},{record:e.record})}))}}),Be=Re.actions,Ee=Be.updateStat,Te=Be.upLevel,Ne=Re.reducer;var Pe=function(e,t){var n=Object(c.useRef)(e);Object(c.useLayoutEffect)((function(){n.current=e}),[e]),Object(c.useEffect)((function(){if(t||0===t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])};var De=function(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(!1),i=Object(a.a)(o,2),f=i[0],d=i[1],h=Object(R.c)(),p=Pe,m=Pe,b=Object(R.d)(v),j=Object(R.d)(O),x=Object(R.d)(k),_=Object(R.d)(g),B=Object(R.d)(C),E=Object(R.d)(A),T=Object(R.d)(y),N=Object(R.d)(w),P=Object(R.d)(S),D=Object(R.d)(L),G=Object(W.useMediaQuery)({query:"(max-width: 768px)"});Object(c.useEffect)((function(){return document.addEventListener("keyup",re),document.addEventListener("keydown",ce),function(){document.removeEventListener("keydown",ce),document.removeEventListener("keyup",re)}})),Object(c.useEffect)((function(){if(E){if(function(e){return[13,14,15,16].some((function(t){return e[t].isActive}))}(T))return h(ee()),void h(be()).then((function(){return h(H())}));var e=function(e){for(var t={cells:[],rows:{}},n=0,c=function(c){for(var r=0,o=0,i=0;i<10&&(!r||!o);i++)e["".concat(c+i)].isActive?r++:o++;if(10===r&&(n++,t.rows["".concat(n)]={rowStartCell:c},t.cells=[].concat(Object(ne.a)(t.cells),Object(ne.a)(Array.from({length:10},(function(e,t){return c+t}))))),!r)return"break"},r=200;r>=10&&n<4&&"break"!==c(r);r-=10);return Object(u.a)(Object(u.a)({},t),{},{newLines:n})}(T),t=e.cells,n=e.rows,c=e.newLines;if(c>0){var r=function(e,t){for(var n=le()(e),c=Object.values(t).map((function(e){return e.rowStartCell})),r=[],o=c[0];o>10;o-=10)r.push(o);var i=r.filter((function(e){return!c.includes(e)})),a=!1;return r.forEach((function(e){if(!a){for(var t=i.splice(0,1),c=0,r=0;r<10;r++)n["".concat(e+r)].isActive&&c++,n["".concat(e+r)].isActive=n["".concat(+t+r)].isActive;c||(a=!0)}})),n}(T,n),o=function(e,t,n){return e+ae[n].point[t]}(N,c,P),i=D+c;h(me({cells:t,newPlayArea:r})).then((function(){Object(R.b)((function(){h(Ee({newScore:o,newLines:c})),h(ke()),String(i).startsWith(String(P))&&1!==i&&h(Te(P+1))}))}))}else h(ke())}}),[E]);var U=function(){Object(R.b)((function(){h(V("drop")),h(ge())}))},z=function(){Object(R.b)((function(){h(V("turn")),h(we())}))},$=function(){Object(R.b)((function(){h(V("left")),h(xe())}))},Z=function(){Object(R.b)((function(){h(V("right")),h(Ae())}))},q=function(e){if(e)return h(ye());Object(R.b)((function(){h(V("down")),h(ye())}))},Q=function(e){Object(R.b)((function(){var t;e&&h(V("restart")),(x||e)&&h({type:"restart",payload:t}),h(K()),h(ke())}))},te=function(){h(V("pause")),j?h(Y()):Q()},ce=function(e){if(b||e.preventDefault(),!E&&n!==e.key&&n!==e.keyCode){if(M.pause.includes(e.key))return r(e.key),te();if(M.restart.includes(e.key))return r(e.key),void Q("restart");if(!x&&!b)return M.turn.includes(e.key)?(r(e.key),z()):M.left.includes(e.key)?(r(e.key),$()):M.right.includes(e.key)?(r(e.key),Z()):M.down.includes(e.key)?(r(e.key),q()):M.drop.includes(e.keyCode)?(r(e.keyCode),U()):void 0}},re=function(e){r(""),d(!1),h(X())};return p((function(){return f||d(!0),"drop"===_?U():"turn"===_?z():"left"===_?$():"right"===_?Z():"down"===_?q():function(){}}),Object(c.useMemo)((function(){return I.includes(_)?"turn"===_||"drop"===_?170:f?50:120:null}),[_,f])),m((function(){return q("timer")}),Object(c.useMemo)((function(){return"down"===_||b||x||E?null:B}),[_,B,b,x,E])),Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)(l,{children:Object(s.jsx)(J,{onDown:function(e){_===e||E||("restart"===e?Q("restart"):"pause"===e&&te(),x||b||("turn"===e?z():"left"===e?$():"right"===e?Z():"down"===e?q():"drop"===e&&U()))},onUp:function(){d(!1),h(X())},isTablet:G})}),!G&&Object(s.jsx)(F,{})]})},Ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,162)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),o(e),i(e)}))},Ue=n(57),ze=n.n(Ue),Ie=localStorage.getItem("reduxState")?JSON.parse(localStorage.getItem("reduxState")):{},Me=Object(Z.a)({reducer:{main:Se,stat:Ne,gameControl:te},preloadedState:Ie,devTools:!1}),$e=function(){return localStorage.setItem("reduxState",JSON.stringify(Me.getState()))};Me.subscribe((function(){var e=Me.getState().main.isRoundEnd,t=Me.getState().gameControl.isPause;e||(t&&$e(),ze()($e,1e3))})),i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(R.a,{store:Me,children:Object(s.jsx)(De,{})})}),document.getElementById("root")),Ge()},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){}},[[161,1,2]]]);
//# sourceMappingURL=main.93a8185e.chunk.js.map